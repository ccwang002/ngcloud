{% extends 'stage.html' %}

{% block title %}
Alignment (using Tophat)
{% endblock %}

{% set active='tophat' %}

{% block stage_note %}
<h2>Alignment (using Tophat)</h2>
<p>Ipsum est alias nisi laboriosam tempore iste modi, fuga, ipsum. Et nihil harum veniam dicta recusandae. Natus ipsum hic nemo aspernatur quis exercitationem animi reiciendis atque. Accusamus impedit similique voluptatum modi accusamus commodi. Eaque facere necessitatibus pariatur aperiam officia consequatur? Quos ex numquam adipisci sit unde neque sequi eum sequi!</p>
<p class="text-right lead">more information on <a href="#">this page</a>.</p>
{% endblock %}

{% block panel %}
<div class="container-fluid">
  <h2>Summary</h2>
  <h3>Detailed statistics of alignment output</h3>
  <div class="row">
    <div class="col-sm-12">
  <div class="alert alert-info alert-dismissable pull-right closable-note">
    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
    <p>Elit iure iure esse nam quaerat cum ad officia. Totam qui officia ipsam nobis commodi! Ratione possimus distinctio inventore aliquam.</p>
    <p class="text-right">More about <strong><a href="#">by base</a></strong>.</p>
  </div>
  <p>Lorem atque esse atque soluta minima odio neque! Sequi iste sequi animi sunt cupiditate, amet, nemo in porro. Ullam accusantium aliquam suscipit aspernatur perspiciatis! Unde neque reiciendis ipsum iste nihil.</p>
</div>
</div>
  <div class="table-responsive">
    <table class="table table-hover">
      <thead>
        <tr>
          <th></th>
          <th colspan="2">SRR950078</th>
          <th colspan="2">SRR950079</th>
        </tr>
         <tr>
          <th></th>
          <th>R1</th>
          <th>R2</th>
          <th>R1</th>
          <th>R2</th>
        </tr>

      </thead>
      <tbody>
        <tr>
          <th>Input</th>
          <td>111,037,701</td>
          <td>111,037,701</td>
          <td>110,014,689</td>
          <td>110,014,689</td>
        </tr>
        <tr>
          <th>Mapped</th>
          <td>85328015 (76.8% of input)</td>
          <td>87637379 (78.9% of input)</td>
          <td>69545479 (72.3% of input)</td>
          <td>65645479 (70.2% of input)</td>
        </tr>
        <tr>
          <th>Multiple alignments</th>
          <td>7069550 ( 8.3%, 8857 have &gt; 20)</td>
          <td>7531291 ( 8.6%, 9310 have &gt; 20)</td>
          <td>7069550 ( 8.3%, 8857 have &gt; 20)</td>
          <td>7069550 ( 8.3%, 8857 have &gt; 20)</td>
        </tr>
        <tr>
          <th>Summary</th>
          <td colspan="2">77.9% overall alignment rate</td>
          <td colspan="2">76.8% overall alignment rate</td>
        </tr>
      </tbody>
    </table>
  </div>

  <h3>Detailed statistics of pairs alignment output</h3>
  <div class="row"><div class="col-sm-12">
  <div class="alert alert-info alert-dismissable pull-right closable-note">
    <button type="button" class="close" data-dismiss="alert" aria-hidden="true">&times;</button>
    <p>Lorem quod odit quasi aspernatur tenetur totam architecto enim hic!</p>
    <p class="text-right">More about <strong><a href="#">by base</a></strong>.</p>
  </div>
  <p>Sit lorem accusamus earum magni quaerat porro accusantium atque iste quam necessitatibus. Inventore corrupti in at delectus quia velit eius cupiditate dignissimos! Reiciendis earum error culpa voluptas iste! Laudantium inventore mollitia ut sequi quas, laboriosam libero nulla, exercitationem adipisci illum? Ut earum earum eos illum dicta libero minus officia consectetur?</p>
  </div></div>

  <div class="row">
    <div class="col-sm-12">
    <h4>Type of Alignment</h4>
  </div>
    <div class="col-sm-5">
      <div id="piechart" style="width: 90%; height: 350px;"></div>
    </div>
    <div class="col-sm-7">
    <table class="table table-hover" style="margin-top: 20px;">
      <thead>
        <tr>
          <th></th>
          <th>SRR950078</th>
          <th>SRR950079</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <th>Aligned pairs</th>
          <td>82411062</td>
          <td>78410423</td>
        </tr>
        <tr>
          <th>Multiple alignments</th>
          <td>5165148 (6.3%) </td>
          <td>4864532 (6.9%)</td>
        </tr>
        <tr>
          <th>Discordant alignment</th>
          <td>558406 (0.7%)</td>
          <td>464364 (0.3%)</td>
        </tr>
        <tr>
          <th>Summary</th>
          <td>73.7% concordant pair alignment rate.</td>
          <td>70.2% concordant pair alignment rate.</td>
        </tr>
      </tbody>
    </table>
  </div>
 </div>
</div>
{% endblock %}

{% block extra_js %}
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript">
      google.load("visualization", "1", {packages:["corechart"]});
      google.setOnLoadCallback(drawChart);
      function drawChart() {
        var data = google.visualization.arrayToDataTable([
          ['Alignment', 'Percentage'],
          ['Both mapped',     82411062],
          ['Single mapped',     558406],
          ['Multiple aligned', 5165148],
          ['Unalinged',       30000000]
        ]);

        var options = {
          legend: 'none',
          pieSliceText: 'label',
        };

        var chart = new google.visualization.PieChart(document.getElementById('piechart'));
        chart.draw(data, options);
      }
    </script>
{% endblock %}
